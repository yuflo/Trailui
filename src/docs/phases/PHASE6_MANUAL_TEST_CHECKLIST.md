# Phase 6: 手动测试检查清单

> **目的：** 手动验证Phase 1-5架构优化后的系统功能完整性  
> **执行时间：** 约30分钟  
> **状态：** 待执行

---

## 📋 测试前准备

- [ ] 确保开发服务器运行正常 (`npm run dev`)
- [ ] 打开浏览器控制台，准备观察日志
- [ ] 清除浏览器缓存（如需要）

---

## 🧪 测试分类

### Part 1: 基础功能测试

#### 1.1 引擎初始化
- [ ] 页面加载无报错
- [ ] Ticker消息流自动显示
- [ ] 左栏显示"未追踪线索"板块
- [ ] 右栏显示玩家状态面板
- [ ] 中栏显示主视窗

**验证点：**
```
✓ GameEngine初始化成功
✓ ServiceContainer单例模式工作
✓ DataAccessFactory创建正确的Mock实例
```

#### 1.2 视觉主题切换
- [ ] 点击主题选择器
- [ ] 切换到"noir-mystery"（黑色侦探）
- [ ] UI配色立即变化
- [ ] 玻璃态效果更新
- [ ] 字体颜色正确调整

**验证点：**
```
✓ VisualService.applyArchetype() works
✓ UI实时响应主题变化
✓ 所有11种主题可切换
```

---

### Part 2: 远场探索测试

#### 2.1 Ticker消息流
- [ ] Ticker显示8条消息
- [ ] 消息内容完整（标题+内容+时间）
- [ ] 点击"刷新消息流"按钮
- [ ] 消息重新随机排列

**验证点：**
```
✓ TickerService.getMessages() works
✓ WorldInfoDataAccess返回正确数据
✓ 刷新功能正常
```

#### 2.2 线索提取
- [ ] 点击Ticker中的第一条消息
- [ ] 弹出"提取线索"对话框
- [ ] 显示线索详情
- [ ] 点击"提取线索"按钮
- [ ] 对话框关闭
- [ ] 左栏"未追踪线索"增加1条

**验证点：**
```
✓ ClueService.extractClue() works
✓ ClueDataAccess.findById() works
✓ UI正确更新线索状态
```

#### 2.3 线索追踪（开启故事）
- [ ] 左栏点击未追踪线索
- [ ] 弹出线索详情对话框
- [ ] 点击"开始追踪"按钮
- [ ] 对话框关闭
- [ ] 线索状态变为"追踪中"
- [ ] 弹出"故事已开启"对话框
- [ ] 显示故事信息和可用场景

**验证点：**
```
✓ ClueService.trackClue() works
✓ StoryService.getStoryById() works
✓ StoryDataAccess.getStoryById() works
✓ 故事正确加载
```

---

### Part 3: 近场交互测试

#### 3.1 进入场景（剧情模式）
- [ ] 在故事对话框中点击"Scene A: 掘金者酒吧入口"
- [ ] 选择"剧情模式"
- [ ] 对话框关闭
- [ ] 中栏显示"近场交互"标题
- [ ] 显示场景描述
- [ ] 自动播放叙事序列（3条消息）
- [ ] 显示"介入点"提示

**验证点：**
```
✓ NearFieldManager.enterNarrative() works
✓ FreedomMirrorService.loadScenePlot() works
✓ StoryDataAccess.getSceneById() works
✓ narrative_sequence正确加载
```

#### 3.2 切换到冲突模式
- [ ] 点击"切换到冲突模式"按钮
- [ ] 叙事流暂停
- [ ] 显示NPC状态卡片
- [ ] 显示玩家意图输入框
- [ ] 显示"提交行为"按钮

**验证点：**
```
✓ NearFieldManager.switchMode() works
✓ ScenarioSnapshot正确加载
✓ SceneDataAccess.getSceneMock() works
```

#### 3.3 玩家交互（冲突模式）
- [ ] 输入框输入"我想和酒保聊聊"
- [ ] 点击"提交行为"按钮
- [ ] 输入框清空
- [ ] 消息流新增玩家行为
- [ ] 消息流新增NPC回应
- [ ] NPC状态更新（关系值变化）
- [ ] 右栏显示关系值变化提示

**验证点：**
```
✓ TurnManager.submitAction() works
✓ 回合推进正常
✓ 状态变化计算正确
```

#### 3.4 场景结束
- [ ] 连续提交3次行为
- [ ] 达到max_turns限制
- [ ] 弹出"场景结束"对话框
- [ ] 显示获得的新线索
- [ ] 点击"确定"返回远场

**验证点：**
```
✓ TurnManager.checkMaxTurns() works
✓ StoryDataAccess.getSceneById() works (检查max_turns)
✓ 场景结束逻辑正常
```

---

### Part 4: 数据流完整性测试

#### 4.1 DataAccess → Service
- [ ] 打开浏览器控制台
- [ ] 观察网络请求（应该没有API调用）
- [ ] 所有数据都从Mock获取
- [ ] 无直接数据文件导入错误

**验证点：**
```
✓ Mock实现正常工作
✓ Service层正确使用DataAccess接口
✓ 无循环依赖错误
```

#### 4.2 Service → Engine → UI
- [ ] 提取线索后，UI立即更新
- [ ] 追踪线索后，故事立即加载
- [ ] 切换主题后，UI立即变化
- [ ] 提交行为后，状态立即更新

**验证点：**
```
✓ 数据流向正确：Data → DataAccess → Service → Engine → UI
✓ 状态管理正常
✓ UI响应及时
```

---

### Part 5: 错误处理测试

#### 5.1 无效线索ID
- [ ] 打开控制台
- [ ] 执行：`window.gameEngine.extractClue('INVALID_ID')`
- [ ] 返回null或错误提示
- [ ] 无崩溃

**验证点：**
```
✓ 错误处理正常
✓ 不会导致系统崩溃
```

#### 5.2 无效故事ID
- [ ] 执行：`window.gameEngine.trackClue('INVALID_CLUE')`
- [ ] 返回错误提示
- [ ] 无崩溃

**验证点：**
```
✓ 边界条件处理正确
```

---

## 📊 测试结果记录

### 通过率统计

| 测试部分 | 测试项数量 | 通过数量 | 通过率 |
|---------|----------|---------|--------|
| Part 1: 基础功能 | 10 | ___ | ___% |
| Part 2: 远场探索 | 12 | ___ | ___% |
| Part 3: 近场交互 | 16 | ___ | ___% |
| Part 4: 数据流 | 8 | ___ | ___% |
| Part 5: 错误处理 | 4 | ___ | ___% |
| **总计** | **50** | ___ | ___% |

### 问题记录

| 问题ID | 问题描述 | 严重程度 | 状态 |
|--------|---------|---------|------|
| - | - | - | - |

---

## ✅ 验收标准

- [ ] 所有测试项通过率 ≥ 95%
- [ ] 无严重Bug
- [ ] 数据流完整
- [ ] UI响应流畅
- [ ] 无控制台错误

---

## 📝 测试执行记录

**执行人：** ___________  
**执行日期：** ___________  
**测试环境：** 
- 浏览器：___________
- 版本：___________
- 操作系统：___________

**总体评价：**

□ 优秀 - 所有测试通过，无问题  
□ 良好 - 绝大部分通过，有少量小问题  
□ 需改进 - 有明显问题需要修复  

**备注：**

___________________________________
___________________________________
___________________________________

---

**测试完成后，请执行自动化测试验证：**
```bash
npm run test:phase6
```
