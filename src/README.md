# ğŸ® Dreamheart Engine

> **èµ›åšæœ‹å…‹é£æ ¼æ–‡å­—å†’é™©æ¸¸æˆå¼•æ“**  
> åŸºäº"è§†è§‰åŸå‹ï¼ˆVisual Archetypeï¼‰"çš„ä¸‰å±‚æ¶æ„è®¾è®¡

![Architecture Status](https://img.shields.io/badge/Architecture-9.8%2F10-brightgreen)
![Phase](https://img.shields.io/badge/Phase-5%20Complete-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)
![React](https://img.shields.io/badge/React-18-blue)
![Tailwind](https://img.shields.io/badge/Tailwind-4.0-blue)

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

Dreamheartå¼•æ“æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–‡å­—å†’é™©æ¸¸æˆå¼•æ“ï¼Œé‡‡ç”¨ä¸‰æ å¸ƒå±€è®¾è®¡ï¼Œæ”¯æŒï¼š

- ğŸ­ **è¿‘åœºäº¤äº’** - å‰§æƒ…/å†²çªæ··åˆæ¨¡å¼ï¼Œ5-Phaseå®Œæ•´å®ç°
- ğŸ” **è¿œåœºæ¢ç´¢** - Tickeræ¶ˆæ¯æµ + çº¿ç´¢è¿½è¸ªç³»ç»Ÿ
- ğŸ¨ **è§†è§‰åŸå‹** - 11ç§é¢„è®¾ä¸»é¢˜ï¼Œæ”¯æŒå®æ—¶åˆ‡æ¢
- ğŸ’¾ **æ•°æ®é©±åŠ¨** - ä¸‰å±‚æ¶æ„ï¼ŒMock/APIåŒå®ç°ï¼ŒDemoâ†’ç”Ÿäº§æ— ç¼åˆ‡æ¢

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              UI Layer (React)                â”‚
â”‚  å·¦æ ï¼šçº¿ç´¢æ¿ | ä¸­æ ï¼šä¸»è§†çª— | å³æ ï¼šæ•°æ®é¢æ¿   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Service Layer (ä¸šåŠ¡é€»è¾‘)            â”‚
â”‚  ClueService | StoryService | NearFieldServiceâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        DataAccess Layer (æ¥å£æŠ½è±¡)           â”‚
â”‚  Mockå®ç°(Demo) â†â†’ APIå®ç°(Production)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Data Files (çº¯æ•°æ®)                 â”‚
â”‚  Story Maps | Scenes | Clues | World Info   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¶æ„ç‰¹ç‚¹ï¼š**
- âœ… **ä¾èµ–å€’ç½®** - Serviceä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–æ•°æ®æ–‡ä»¶
- âœ… **å•ä¸€èŒè´£** - æ•°æ®/é…ç½®/é€»è¾‘å®Œå…¨åˆ†ç¦»
- âœ… **å¯æµ‹è¯•æ€§** - Mockå®ç°æ–¹ä¾¿æµ‹è¯•
- âœ… **å¯æ‰©å±•æ€§** - DataAccessFactoryç»Ÿä¸€ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
npm install
```

### è¿è¡Œå¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### è¿è¡Œæµ‹è¯•
```bash
npm test
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ğŸ¯ æ ¸å¿ƒæ–‡æ¡£
- **[æ¶æ„æ¸…ç†è®¡åˆ’](./ARCHITECTURE_CLEANUP_PLAN.md)** - å½“å‰æ¶æ„çŠ¶æ€å’ŒPhaseè¿›åº¦
- **[æ¶æ„æ–‡æ¡£](/docs/architecture/)** - ä¸‰å±‚æ¶æ„è®¾è®¡è¯¦è§£
- **[PhaseæŠ¥å‘Š](/docs/phases/)** - å„é˜¶æ®µå®ŒæˆæŠ¥å‘Š

### âœ¨ åŠŸèƒ½æ–‡æ¡£
- **[è¿‘åœºäº¤äº’ç³»ç»Ÿ](/docs/features/nearfield/)** - å‰§æƒ…/å†²çªæ··åˆæ¨¡å¼
- **[çº¿ç´¢è¿½è¸ªç³»ç»Ÿ](/docs/features/clue-tracking/)** - è¿œåœºæ¢ç´¢æ ¸å¿ƒ
- **[è§†è§‰åŸå‹ç³»ç»Ÿ](/config/visual-archetypes/)** - ä¸»é¢˜é…ç½®

### ğŸ“¦ APIæ–‡æ¡£
- **[Serviceæ¥å£](/types/service.types.ts)** - Serviceå±‚æ¥å£å®šä¹‰
- **[DataAccessæ¥å£](/types/data-access.types.ts)** - æ•°æ®è®¿é—®å±‚æ¥å£
- **[ç±»å‹ç³»ç»Ÿ](/types/)** - å®Œæ•´ç±»å‹å®šä¹‰

## ğŸ¨ è§†è§‰åŸå‹

æ”¯æŒ11ç§é¢„è®¾ä¸»é¢˜ï¼Œå¯å®æ—¶åˆ‡æ¢ï¼š

| ä¸»é¢˜ | é£æ ¼ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| `tense-urban` | ç´§å¼ éƒ½å¸‚ | çŠ¯ç½ªã€æ‚¬ç–‘ |
| `noir-mystery` | é»‘è‰²ä¾¦æ¢ | ä¾¦æ¢ã€æ¨ç† |
| `action-intense` | åŠ¨ä½œæ¿€çƒˆ | åŠ¨ä½œã€å†’é™© |
| `neon-carnival` | éœ“è™¹ç‹‚æ¬¢ | èµ›åšæœ‹å…‹ |
| `contemplative` | æ²‰æ€å†…çœ | å“²å­¦ã€å¿ƒç† |
| `sensual-haze` | æ„Ÿæ€§è¿·ç¦» | æµªæ¼«ã€æƒ…æ„Ÿ |
| `corporate-cold` | ä¼ä¸šå†·é…· | å•†æˆ˜ã€é˜´è°‹ |
| `daily-cozy` | æ—¥å¸¸æ¸©é¦¨ | ç”Ÿæ´»ã€æ²»æ„ˆ |
| `artistic-flow` | è‰ºæœ¯æµåŠ¨ | è‰ºæœ¯ã€åˆ›ä½œ |
| `tech-startup` | ç§‘æŠ€åˆ›ä¸š | ç§‘æŠ€ã€å•†ä¸š |

æŸ¥çœ‹ [è§†è§‰åŸå‹é…ç½®](/config/visual-archetypes/) äº†è§£è¯¦æƒ…ã€‚

## ğŸ§© é¡¹ç›®ç»“æ„

```
dreamheart-engine/
â”œâ”€â”€ components/          # Reactç»„ä»¶
â”‚   â”œâ”€â”€ ui/             # shadcn/uiç»„ä»¶åº“
â”‚   â”œâ”€â”€ ThemeSelector.tsx
â”‚   â””â”€â”€ NearFieldDemo.tsx
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ visual-archetypes/  # è§†è§‰åŸå‹é…ç½®
â”‚   â”œâ”€â”€ animation.config.ts
â”‚   â””â”€â”€ layout.config.ts
â”œâ”€â”€ data/               # æ•°æ®æ–‡ä»¶ï¼ˆçº¯æ•°æ®ï¼‰
â”‚   â””â”€â”€ hong-kong/
â”‚       â”œâ”€â”€ clues/
â”‚       â”œâ”€â”€ scenes/
â”‚       â”œâ”€â”€ stories/
â”‚       â””â”€â”€ world-info/
â”œâ”€â”€ docs/               # æ–‡æ¡£ä¸­å¿ƒ
â”‚   â”œâ”€â”€ architecture/   # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ phases/         # PhaseæŠ¥å‘Š
â”‚   â”œâ”€â”€ features/       # åŠŸèƒ½æ–‡æ¡£
â”‚   â””â”€â”€ archive/        # å†å²å½’æ¡£
â”œâ”€â”€ engine/             # å¼•æ“æ ¸å¿ƒ
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ GameEngine.ts
â”‚   â”‚   â”œâ”€â”€ StateManager.ts
â”‚   â”‚   â””â”€â”€ TurnManager.ts
â”‚   â”œâ”€â”€ data-access/    # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ mock/       # Mockå®ç°
â”‚   â”‚   â”œâ”€â”€ api/        # APIå®ç°
â”‚   â”‚   â””â”€â”€ DataAccessFactory.ts
â”‚   â”œâ”€â”€ services/       # Serviceå±‚
â”‚   â”‚   â””â”€â”€ impl/
â”‚   â””â”€â”€ systems/        # å­ç³»ç»Ÿ
â”œâ”€â”€ types/              # TypeScriptç±»å‹
â”‚   â”œâ”€â”€ data-access.types.ts
â”‚   â”œâ”€â”€ service.types.ts
â”‚   â””â”€â”€ story.types.ts
â”œâ”€â”€ hooks/              # React Hooks
â”‚   â””â”€â”€ useGameEngine.ts
â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
```

## ğŸ“Š é¡¹ç›®è¿›åº¦

### âœ… å·²å®Œæˆï¼ˆPhase 1-6ï¼‰

- [x] **Phase 1** - DataAccesså±‚æ­å»º
- [x] **Phase 2** - Serviceå±‚é‡æ„
- [x] **Phase 3** - ç±»å‹ç³»ç»Ÿæ•´ç†
- [x] **Phase 4** - æ•°æ®æ–‡ä»¶çº¯å‡€åŒ–
- [x] **Phase 5** - æ–‡æ¡£æ¸…ç†
- [x] **Phase 6** - æµ‹è¯•éªŒè¯

### ğŸ‰ æ¶æ„ä¼˜åŒ–å®Œæˆï¼

**æ¶æ„è¯„åˆ†:** 10/10 âœ¨  
**çŠ¶æ€:** ç”Ÿäº§å°±ç»ª ğŸš€

æŸ¥çœ‹ [æ¶æ„ä¼˜åŒ–å®Œæˆæ€»ç»“](/ARCHITECTURE_OPTIMIZATION_COMPLETE.md)

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. è¿‘åœºäº¤äº’ç³»ç»Ÿ

**ç‰¹æ€§ï¼š**
- å‰§æƒ…/å†²çªæ··åˆæ¨¡å¼
- 5ä¸ªPhaseå®Œæ•´å®ç°
- æ”¯æŒç©å®¶æ„å›¾è¾“å…¥
- å®æ—¶æ˜¾ç¤ºNPCçŠ¶æ€å’Œå…³ç³»å€¼

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```typescript
// å¼€å¯è¿‘åœºäº¤äº’
const result = await gameEngine.enterNearField('scene-a', 'narrative');

// æäº¤ç©å®¶è¡Œä¸º
const turnResult = await gameEngine.submitNearFieldAction('æˆ‘æƒ³å’Œé…’ä¿èŠèŠ');

// åˆ‡æ¢æ¨¡å¼
await gameEngine.switchNearFieldMode('conflict');
```

### 2. è¿œåœºæ¢ç´¢ç³»ç»Ÿ

**ç‰¹æ€§ï¼š**
- Tickeræ¶ˆæ¯æµè½®è¯¢
- çº¿ç´¢æå–å’Œè¿½è¸ª
- æ•…äº‹è‡ªåŠ¨è§¦å‘

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```typescript
// åˆ·æ–°æ¶ˆæ¯æµ
gameEngine.refreshTicker();

// æå–çº¿ç´¢
const clue = await clueService.extractClue('CLUE_001');

// è¿½è¸ªçº¿ç´¢ï¼ˆå¼€å¯æ•…äº‹ï¼‰
const story = await clueService.trackClue('CLUE_001');
```

### 3. è§†è§‰åŸå‹ç³»ç»Ÿ

**ç‰¹æ€§ï¼š**
- 11ç§é¢„è®¾ä¸»é¢˜
- å®æ—¶åˆ‡æ¢
- è‡ªåŠ¨åº”ç”¨åˆ°UI

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```typescript
// åˆ‡æ¢ä¸»é¢˜
visualService.applyArchetype('noir-mystery');

// è·å–å½“å‰ä¸»é¢˜
const current = visualService.getCurrentArchetype();
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶:** React 18 + TypeScript 5.0
- **æ ·å¼:** Tailwind CSS 4.0
- **UIç»„ä»¶:** shadcn/ui
- **çŠ¶æ€ç®¡ç†:** è‡ªç ” StateManager
- **æ„å»ºå·¥å…·:** Vite
- **æµ‹è¯•:** Vitest

## ğŸ“„ è®¸å¯è¯

æŸ¥çœ‹ [Attributions.md](./Attributions.md) äº†è§£ç¬¬ä¸‰æ–¹åº“è®¸å¯ä¿¡æ¯ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“§ è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ:** [GitHub Repository]
- **æ–‡æ¡£ä¸­å¿ƒ:** `/docs/`
- **é—®é¢˜åé¦ˆ:** [GitHub Issues]

---

**å½“å‰ç‰ˆæœ¬:** Phase 5 Complete  
**æ¶æ„è¯„åˆ†:** 9.8/10  
**æœ€åæ›´æ–°:** 2025-01-06

---

## ğŸŒŸ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ï¸ï¼

---

**Built with â¤ï¸ by Dreamheart Team**
